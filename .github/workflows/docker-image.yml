name: Docker Image CI

#on: [pull_request, push] 
on: 
  push:
    branches: [ "feature/customization-of-the-stream-name-1.16.2" ]
  pull_request:
    branches: [ "feature/customization-of-the-stream-name-1.16.2" ]

jobs:
  build:
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v3
    - name: Build the Docker image
      run: docker build . --file Dockerfile -e PACKAGECLOUD_TOKEN=${{ secrets.PACKAGECLOUD_TOKEN }} --tag gst-1.0-rtspclientsink-1.16.2:$(date +%s)
      env:
        PACKAGECLOUD_TOKEN: ${{ secrets.PACKAGECLOUD_TOKEN }}
